@page
@model CV_Flare.RazorPage.Pages.Templates.template_cvModel
@{
    ViewData["Title"] = "Our Templates";
}

<section class="demo section-padding-100-0">
    <div class="container">
        <div class="section-heading text-center">
            <div class="dream-dots justify-content-center">
                <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
            </div>
            <h2 class="bold">Các mẫu sáng tạo của chúng tôi</h2>
            <p>Khám phá các mẫu CV độc đáo và chuyên nghiệp, giúp bạn thể hiện kỹ năng và nổi bật trong mắt nhà tuyển dụng. Định hình phong cách cá nhân và ghi dấu ấn riêng ngay từ hồ sơ của bạn.</p>
        </div>
        <div class="row">

            @foreach (var item in Model.TemplatesVM)
            {
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="demo-item">
                        <a href=''>
                            <img src="@item.PreviewImg" alt="demo" class="img-responsive">
                        </a>
                        <div class="preview-btn-wrapper text-center">
                            <a class="preview-demo" href="javascript:void(0);" onclick="openPopup('@item.PreviewImg')">
                                Xem mẫu <i class="fa fa-long-arrow-right"></i>
                            </a>
                            <a class='preview-demo v2' href='template-edit.html'>
                                Dùng mẫu <i class="fa fa-long-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            }

        </div>
    </div>
</section>

<!-- Popup Container -->
<div id="cvPopup" class="popup">
    <div class="popup-content">
        <span class="close-btn">&times;</span>
        <img id="popupImg" src="" alt="CV Template" class="img-responsive">
    </div>
</div>

<style>
    /* Popup CSS */
    .popup {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 80px;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }

    .popup-content {
        position: relative;
        width: 80%; /* Thay đổi để kích thước popup lớn hơn */
        max-width: 1000px;
        max-height: 90%;
        background-color: white;
        padding: 20px;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        overflow-y: auto; /* Cho phép cuộn dọc nếu ảnh quá lớn */
    }

        .popup-content img {
            width: 100%;
            height: auto;
        }

    .close-btn {
        position: absolute;
        top: 10px;
        right: 20px;
        color: #fff;
        font-size: 30px;
        font-weight: bold;
        transition: 0.3s;
    }

        .close-btn:hover,
        .close-btn:focus {
            color: #bbb;
            cursor: pointer;
        }


</style>

<script>
    // Get the popup
    var popup = document.getElementById("cvPopup");

    // Get the image and insert it inside the popup
    var popupImg = document.getElementById("popupImg");

    // Function to open the popup
    function openPopup(imgSrc) {
        if (imgSrc) {
            popup.style.display = "flex";  // Dùng flex để căn giữa nội dung
            popupImg.src = imgSrc;
        }
    }

    // Get the <span> element that closes the popup
    var closeBtn = document.getElementsByClassName("close-btn")[0];

    // When the user clicks on <span> (x), close the popup
    closeBtn.onclick = function () {
        popup.style.display = "none";  // Đảm bảo popup được ẩn khi bấm nút "x"
    }

    // When the user clicks anywhere outside of the popup, close it
    window.onclick = function (event) {
        if (event.target == popup) {
            popup.style.display = "none";  // Đảm bảo popup được ẩn khi click bên ngoài
        }
    }

    // Đảm bảo popup luôn ẩn khi trang được tải lần đầu
    document.addEventListener('DOMContentLoaded', function () {
        popup.style.display = "none"; // Ẩn popup khi trang vừa tải
    });


</script>